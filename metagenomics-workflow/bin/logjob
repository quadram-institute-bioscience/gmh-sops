#!/bin/bash

echo '# Job info'
date +%Y-%m-%d_%H:%M
echo User = $USER
echo Directory = $(pwd)
echo Linux = $(uname -a)
echo
echo '## Memory'
free -h
echo '## Queue'
squeue -u $USER --format "%12i %.12P | %26j %.8u %.3T %.12M %.12l  %R"
echo
echo '## Slurm variables'
echo SLURM_CHECKPOINT_IMAGE_DIR = $SLURM_CHECKPOINT_IMAGE_DIR
echo SLURM_GTIDS = $SLURM_GTIDS
echo SLURM_JOB_UID = $SLURM_JOB_UID
echo SLURM_PRIO_PROCESS = $SLURM_PRIO_PROCESS
echo SLURM_STEP_NUM_NODES = $SLURM_STEP_NUM_NODES
echo SLURM_CLUSTER_NAME = $SLURM_CLUSTER_NAME
echo SLURM_JOB_ACCOUNT = $SLURM_JOB_ACCOUNT
echo SLURM_JOB_USER = $SLURM_JOB_USER
echo SLURM_PROCID = $SLURM_PROCID
echo SLURM_STEP_NUM_TASKS = $SLURM_STEP_NUM_TASKS
echo SLURM_CPU_BIND = $SLURM_CPU_BIND
echo SLURM_JOB_CPUS_PER_NODE = $SLURM_JOB_CPUS_PER_NODE
echo SLURM_LAUNCH_NODE_IPADDR = $SLURM_LAUNCH_NODE_IPADDR
echo SLURM_PTY_PORT = $SLURM_PTY_PORT
echo SLURM_STEP_TASKS_PER_NODE = $SLURM_STEP_TASKS_PER_NODE
echo SLURM_CPU_BIND_LIST = $SLURM_CPU_BIND_LIST
echo SLURM_JOB_GID = $SLURM_JOB_GID
echo SLURM_LOCALID = $SLURM_LOCALID
echo SLURM_PTY_WIN_COL = $SLURM_PTY_WIN_COL
echo SLURM_SUBMIT_DIR = $SLURM_SUBMIT_DIR
echo SLURM_CPU_BIND_TYPE = $SLURM_CPU_BIND_TYPE
echo SLURM_JOBID = $SLURM_JOBID
echo SLURM_LOCAL_SCRATCH = $SLURM_LOCAL_SCRATCH
echo SLURM_PTY_WIN_ROW = $SLURM_PTY_WIN_ROW
echo SLURM_SUBMIT_HOST = $SLURM_SUBMIT_HOST
echo SLURM_CPU_BIND_VERBOSE = $SLURM_CPU_BIND_VERBOSE
echo SLURM_JOB_ID = $SLURM_JOB_ID
echo SLURM_NNODES = $SLURM_NNODES
echo SLURM_SRUN_COMM_HOST = $SLURM_SRUN_COMM_HOST
echo SLURM_TASK_PID = $SLURM_TASK_PID
echo SLURM_CPUS_ON_NODE = $SLURM_CPUS_ON_NODE
echo SLURM_JOB_NAME = $SLURM_JOB_NAME
echo SLURM_NODE_ALIASES = $SLURM_NODE_ALIASES
echo SLURM_SRUN_COMM_PORT = $SLURM_SRUN_COMM_PORT
echo SLURM_TASKS_PER_NODE = $SLURM_TASKS_PER_NODE
echo SLURM_CPUS_PER_TASK = $SLURM_CPUS_PER_TASK
echo SLURM_JOB_NODELIST = $SLURM_JOB_NODELIST
echo SLURM_NODEID = $SLURM_NODEID
echo SLURM_STEPID = $SLURM_STEPID
echo SLURM_TOPOLOGY_ADDR = $SLURM_TOPOLOGY_ADDR
echo SLURMDEMO = $SLURMDEMO
echo SLURM_JOB_NUM_NODES = $SLURM_JOB_NUM_NODES
echo SLURM_NODELIST = $SLURM_NODELIST
echo SLURM_STEP_ID = $SLURM_STEP_ID
echo SLURM_TOPOLOGY_ADDR_PATTERN = $SLURM_TOPOLOGY_ADDR_PATTERN
echo SLURM_DISTRIBUTION = $SLURM_DISTRIBUTION
echo SLURM_JOB_PARTITION = $SLURM_JOB_PARTITION
echo SLURM_NPROCS = $SLURM_NPROCS
echo SLURM_STEP_LAUNCHER_PORT = $SLURM_STEP_LAUNCHER_PORT
echo SLURM_UMASK = $SLURM_UMASK
echo SLURMD_NODENAME = $SLURMD_NODENAME
echo SLURM_JOB_QOS = $SLURM_JOB_QOS
echo SLURM_NTASKS = $SLURM_NTASKS
echo SLURM_STEP_NODELIST = $SLURM_STEP_NODELIST
echo SLURM_WORKING_CLUSTER = $SLURM_WORKING_CLUSTER
echo
echo '## CPUs'
cat /proc/cpuinfo
echo
